{
  "EDITOR_STATE": {
    "allProjectFiles": {
      "3a29a6ca-f13e-4e0b-a0a3-451de367ce36": {
        "id": "3a29a6ca-f13e-4e0b-a0a3-451de367ce36",
        "parent": null,
        "name": "bot-users-hs",
        "type": "DIRECTORY",
        "isDirectory": true,
        "children": [
          "e2756eb8-0c43-4221-bfd8-408069a416ed",
          "025511e8-1f12-4d98-ad37-4d25a3b0276b"
        ],
        "isRemovable": false,
        "filePath": "bot-users-hs"
      },
      "e2756eb8-0c43-4221-bfd8-408069a416ed": {
        "id": "e2756eb8-0c43-4221-bfd8-408069a416ed",
        "parent": "3a29a6ca-f13e-4e0b-a0a3-451de367ce36",
        "name": "lambda.js",
        "type": "LAMBDA_FILE",
        "isDirectory": false,
        "children": [],
        "isRemovable": true,
        "filePath": "bot-users-hs/lambda.js",
        "code": "let AWS = require('aws-sdk');\nlet firebase = require(\"firebase-admin\");\nlet fs = require('fs');\n\nlet serviceAccount = JSON.parse(process.env.service_token);\n\nlet addedUserBots = {\n  \"Abigail\":{\n    \"bio\":\"#Music#Love#Travel\",\n    \"chatsChecked\":0,\n    \"dateOfBirth\":740884837000,\n    \"firstName\":\"Abigail\",\n    \"gender\":0,\n    \"headline\":\"Dammit I'm mad\",\n    \"interested\":2,\n    \"lastName\":\"Morris\",\n    \"maxChatRadius\":50000,\n    \"maxMapRadius\":100000,\n    \"radius\":500,\n    \"long\":-122.1172404,\n    \"lat\":37.4202761  },\n  \"Emma\":{\n    \"bio\":\"People think I'm too patronizing\",\n    \"chatsChecked\":0,\n    \"dateOfBirth\":750884837000,\n    \"firstName\":\"Emma\",\n    \"gender\":0,\n    \"headline\":\"I feel violated\",\n    \"interested\":2,\n    \"lastName\":\"Powell\",\n    \"maxChatRadius\":50000,\n    \"maxMapRadius\":100000,\n    \"radius\":500,\n    \"long\":-122.1172404,\n    \"lat\":37.4202761\n  },\n  \"Isabella2\":{\n    \"bio\":\"I used to be good at sports. Then I realized that I could buy trophies\",\n    \"chatsChecked\":0,\n    \"dateOfBirth\":760884837000,\n    \"firstName\":\"Isabella\",\n    \"gender\":0,\n    \"headline\":\"Love youuu\",\n    \"interested\":2,\n    \"lastName\":\"Foster\",\n    \"maxChatRadius\":50000,\n    \"maxMapRadius\":100000,\n    \"radius\":500,\n    \"long\":-122.1172404,\n    \"lat\":37.4202761\n  },\n  \"Mia\":{\n    \"bio\":\"@hell\",\n    \"chatsChecked\":0,\n    \"dateOfBirth\":770884837000,\n    \"firstName\":\"Mia\",\n    \"gender\":0,\n    \"headline\":\"It's happy hour\",\n    \"interested\":2,\n    \"lastName\":\"Hughes\",\n    \"maxChatRadius\":50000,\n    \"maxMapRadius\":100000,\n    \"radius\":500,\n    \"long\":-122.153042,\n    \"lat\":37.4457387\n  },\n  \"JKMadison\":{\n    \"bio\":\"I am a scientist geek\",\n    \"chatsChecked\":0,\n    \"dateOfBirth\":780884837000,\n    \"firstName\":\"Madison\",\n    \"gender\":0,\n    \"headline\":\"Learn from Pandora's mistake\",\n    \"interested\":2,\n    \"lastName\":\"Jackson\",\n    \"maxChatRadius\":50000,\n    \"maxMapRadius\":100000,\n    \"radius\":500,\n    \"long\":-122.153042,\n    \"lat\":37.4457387\n  },\n  \"Freya12\":{\n    \"bio\":\"Expecting the world to treat you fairly\",\n    \"chatsChecked\":0,\n    \"dateOfBirth\":740884837000,\n    \"firstName\":\"Freya\",\n    \"gender\":0,\n    \"headline\":\"Love is like a butterfly\",\n    \"interested\":2,\n    \"lastName\":\"Bennett\",\n    \"maxChatRadius\":50000,\n    \"maxMapRadius\":100000,\n    \"radius\":500,\n    \"long\":-122.153042,\n    \"lat\":37.4457387\n  },\n  \"Stel\":{\n    \"bio\":\"Me my style\",\n    \"chatsChecked\":0,\n    \"dateOfBirth\":750884837000,\n    \"firstName\":\"Stella\",\n    \"gender\":0,\n    \"headline\":\"Life's a journey\",\n    \"interested\":2,\n    \"lastName\":\"Jenkins\",\n    \"maxChatRadius\":50000,\n    \"maxMapRadius\":100000,\n    \"radius\":500,\n    \"long\":-122.1371564,\n    \"lat\":37.4119038  },\n  \"Emy\":{\n    \"bio\":\"You can't be late until you show up\",\n    \"chatsChecked\":0,\n    \"dateOfBirth\":760884837000,\n    \"firstName\":\"Emily\",\n    \"gender\":0,\n    \"headline\":\"Never argue with idiots\",\n    \"interested\":2,\n    \"lastName\":\"Green\",\n    \"maxChatRadius\":50000,\n    \"maxMapRadius\":100000,\n    \"radius\":500,\n    \"long\":-122.1428232,\n    \"lat\":37.4472718\n  },\n  \"GraceD\":{\n    \"bio\":\"Techy,Smart\",\n    \"chatsChecked\":0,\n    \"dateOfBirth\":770884837000,\n    \"firstName\":\"Grace\",\n    \"gender\":0,\n    \"headline\":\"You can go anywhere\",\n    \"interested\":2,\n    \"lastName\":\"Davis\",\n    \"maxChatRadius\":50000,\n    \"maxMapRadius\":100000,\n    \"radius\":500,\n    \"long\":-122.1428232,\n    \"lat\":37.4472718  },\n  \"Dely\":{\n    \"bio\":\"Sports lover\",\n    \"chatsChecked\":0,\n    \"dateOfBirth\":780884837000,\n    \"firstName\":\"Delilah\",\n    \"gender\":0,\n    \"headline\":\"Oxymoron\",\n    \"interested\":2,\n    \"lastName\":\"Scott\",\n    \"maxChatRadius\":50000,\n    \"maxMapRadius\":100000,\n    \"radius\":500,\n    \"long\":-122.1704614,\n    \"lat\":37.4423305\n  },\n  \"GinnyWis\":{\n    \"bio\":\"Words can only hurt you if you try to read them\",\n    \"chatsChecked\":0,\n    \"dateOfBirth\":770884837000,\n    \"firstName\":\"Ginny\",\n    \"gender\":0,\n    \"headline\":\"Think outside the box\",\n    \"interested\":2,\n    \"lastName\":\"Williams\",\n    \"maxChatRadius\":50000,\n    \"maxMapRadius\":100000,\n    \"radius\":500,\n    \"long\":-122.1704614,\n    \"lat\":37.4423305\n  },\n  \"SarahHill\":{\n    \"bio\":\"Never interrupt your opponent while he's making a mistake\",\n    \"chatsChecked\":0,\n    \"dateOfBirth\":780884837000,\n    \"firstName\":\"Sarah\",\n    \"gender\":0,\n    \"headline\":\"Don't let your mind wander\",\n    \"interested\":2,\n    \"lastName\":\"Hill\",\n    \"maxChatRadius\":50000,\n    \"maxMapRadius\":100000,\n    \"radius\":500,\n    \"long\":-122.1175716,\n    \"lat\":37.4304544\n  }\n\n\n}\n\nlet config = {\n    credential: firebase.credential.cert(serviceAccount),\n    authDomain: \"botusers-hs.firebaseapp.com\",\n    databaseURL: \"https://botusers-hs.firebaseio.com\",\n    projectId: \"botusers-hs\",\n    storageBucket: \"botusers-hs.appspot.com\",\n    messagingSenderId: \"170203556283\"\n};\n\nfirebase.initializeApp(config);\n\nlet db = firebase.database();\nlet userLocationRef = db.ref(\"userLocation\");\n\nexports.handler = function (event, context, callback) {\n    console.log(\"Lambda start\");\n    Promise.all(Object.keys(addedUserBots).map(userName => {\n        console.log(\"Updating user : \", userName)\n        let currentUserMeta = addedUserBots[userName];\n        console.log(\"Meta info : \", currentUserMeta);\n        return userLocationRef.child(currentUserMeta['boxKey']).child(userName).set({\n            'lat': currentUserMeta['lat'],\n            'long': currentUserMeta['long'],\n            'mode': currentUserMeta['mode'],\n            'timestamp': +new Date()\n        }).then((response) => {\n            console.log(\"Updated user location of user : \", userName);\n            return response;\n        });\n    })).then(() => {\n        db.goOffline();\n        console.log(\"DB closed\");\n        context.done();\n    }).catch(error => {\n        console.log(error);\n    });\n}\n",
        "triggers": [],
        "config": {
          "runtime": "nodejs8.10",
          "handler": "handler",
          "timeout": 60,
          "memory": 128,
          "layers": []
        },
        "testCases": {
          "a0034d6c-3329-42ed-b280-80cce5f59a0d": {
            "id": "a0034d6c-3329-42ed-b280-80cce5f59a0d",
            "name": "Unnamed event",
            "functionId": "e2756eb8-0c43-4221-bfd8-408069a416ed",
            "event": "{\n    \"key1\": \"value1\",\n    \"key2\": \"value2\",\n    \"key3\": \"value3\"\n}"
          }
        }
      },
      "025511e8-1f12-4d98-ad37-4d25a3b0276b": {
        "id": "025511e8-1f12-4d98-ad37-4d25a3b0276b",
        "parent": "3a29a6ca-f13e-4e0b-a0a3-451de367ce36",
        "name": "addedUserBots.json",
        "type": "JSON_FILE",
        "isDirectory": false,
        "children": [],
        "isRemovable": true,
        "filePath": "bot-users-hs/addedUserBots.json",
        "code": "{\n  \"harshi93\": {\n    \"boxKey\": \"2598,969\",\n    \"lat\": 6.90038,\n    \"long\": 79.8522222,\n    \"mode\": 0\n  },\n  \"bhagya\": {\n    \"boxKey\": \"2598,969\",\n    \"lat\": 6.911405,\n    \"long\": 79.8509307,\n    \"mode\": 0\n  },\n  \"madhu\": {\n    \"boxKey\": \"2598,969\",\n    \"lat\": 6.910739,\n    \"long\": 79.8489137,\n    \"mode\": 0\n  },\n  \"hasie916\": {\n    \"boxKey\": \"2598,968\",\n    \"lat\": 6.8959766,\n    \"long\": 79.8536963,\n    \"mode\": 0\n  },\n  \"pubudu987\": {\n    \"boxKey\": \"2599,969\",\n    \"lat\": 6.9148346,\n    \"long\": 79.9709523,\n    \"mode\": 0\n  },\n  \"namila1990\": {\n    \"boxKey\": \"2599,969\",\n    \"lat\": 6.9148346,\n    \"long\": 79.9709523,\n    \"mode\": 0\n  },\n  \"jayanthi\": {\n    \"boxKey\": \"2598,968\",\n    \"lat\": 6.8630432,\n    \"long\": 79.8635756,\n    \"mode\": 0\n  },\n  \"pasilk\": {\n    \"boxKey\": \"2598,969\",\n    \"lat\": 6.928264,\n    \"long\": 79.8421433,\n    \"mode\": 0\n  }\n}"
      }
    },
    "deletedFiles": [],
    "rootNode": "3a29a6ca-f13e-4e0b-a0a3-451de367ce36",
    "openFiles": [
      "e2756eb8-0c43-4221-bfd8-408069a416ed",
      "025511e8-1f12-4d98-ad37-4d25a3b0276b"
    ],
    "currentFileId": "e2756eb8-0c43-4221-bfd8-408069a416ed",
    "resources": {},
    "customTemplate": {
      "dialect": null,
      "definitions": {}
    },
    "envVariables": [
      {
        "lambdaId": "all",
        "varKey": "SIGMA_AWS_ACC_ID",
        "varValue": null,
        "shouldPersist": false,
        "displayOnly": false,
        "editable": false
      },
      {
        "lambdaId": "all",
        "varKey": "service_token",
        "varValue": null,
        "shouldPersist": false,
        "displayOnly": false,
        "editable": true
      }
    ],
    "packageJSON": {
      "dependencies": {
        "fs": {
          "name": "fs",
          "version": "0.0.1-security"
        },
        "firebase-admin": {
          "name": "firebase-admin",
          "version": "7.0.0"
        }
      }
    }
  },
  "PROJECT_META": {
    "projectName": "bot-users-hs",
    "projectDescription": "",
    "projectVersion": "1.0.0",
    "projectRegion": "us-east-1",
    "platform": "AWS",
    "platformRegions": {},
    "lastSave": 1551355304862
  },
  "VCS_STATE": {
    "provider": "GitHub",
    "repo": {
      "name": "bot-users-hs",
      "url": "https://github.com/TestAndunR/bot-users-hs"
    }
  }
}